<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/5/w3.css">
    <title>Plačilo</title>
</head>
<body>
  
<h1 class="w3-center" style="font-size: 40px; font-weight: bold;">PLAČILO</h1>


 <div class="w3-card-4 w3-dark-grey w3-round-large" style="width: 400px; height: 250px; margin: 0 auto;">

    <div class="w3-container w3-center">
      <h4 style="margin-top: 20px;">MESEČNA NAROČNINA</h4>
      
      <h1>30 EUR / MESEC</h1>

      <div class="w3-section">
        <button class="w3-button w3-green w3-round-large" onclick="openCheckout(itemsList)">NADALJUJ</button>
      </div>
    </div>

<img src="logogt.png">

</div>

<script src="https://cdn.paddle.com/paddle/v2/paddle.js"></script>
<script type="text/javascript">
(function(){
  const CLIENT_TOKEN = "test_bd73c326ac973e27f2bc8fd2c29";
  const ITEMS_LIST = [{ priceId: "pri_01k4pmpsgn1r69x96c9za5nmbc", quantity: 1 }];
  window.itemsList = ITEMS_LIST;

  var checkoutBtn = document.querySelector('button[onclick*="openCheckout"]') || document.querySelector('.w3-button.w3-green');
  if (checkoutBtn) checkoutBtn.disabled = true;

  function initPaddle(){
    try {
      if (!window.Paddle) throw new Error("Paddle missing");
      if (Paddle.Environment) Paddle.Environment.set("sandbox");
      Paddle.Initialize({ token: CLIENT_TOKEN });
      if (checkoutBtn) checkoutBtn.disabled = false;
    } catch (e) {
      if (checkoutBtn) checkoutBtn.disabled = false;
      console.error(e);
    }
  }

  if (window.Paddle && window.Paddle.Checkout && typeof Paddle.Checkout.open === "function") {
    initPaddle();
  } else {
    var s = document.createElement("script");
    s.src = "https://cdn.paddle.com/paddle/v2/paddle.js";
    s.async = true;
    s.onload = initPaddle;
    s.onerror = function(){ if (checkoutBtn) checkoutBtn.disabled = false; console.error("Failed to load Paddle"); };
    document.head.appendChild(s);
  }

  window.openCheckout = function(items){
    if (!window.Paddle || !Paddle.Checkout || typeof Paddle.Checkout.open !== "function") {
      alert("Plačilna storitev še ni pripravljena — poskusite ponovno.");
      return;
    }
    Paddle.Checkout.open({ items: items });
  };
})();

</script>

</body>
</html>
